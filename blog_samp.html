<!DOCTYPE html>      
<html lang="en">       
 
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />    
<meta name="viewport" content="width=device-width, minimum-scale=1.0" />
<meta name="description" content="Observation Field Viewer" />
<link rel="icon" type="image/png" href="plant-icon-96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="plant-icon-96.svg" />
<link rel="shortcut icon" href="plant-club.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="plant-icon-192.png" />
<meta name="apple-mobile-web-app-title" content="Observation Field Viewer" />
<link rel="manifest" href="plant_club.webmanifest" />
<link rel="stylesheet" type="text/css" href="seed_library.css" />
<script type="text/javascript" src='common_func.js'> </script>
<script type="text/javascript" src='js/plant_params_v10.js'></script>
<title>Blog Sample</title>
</head>

<style>
   #menu_title { /*padding-top:1px;*/ font-size:16px; }
   #error { margin-left:15px; margin-bottom: 10px; margin-top:50px; width:fit-content; display: block; justify-content:start; border-width:2px 2px; border-style:solid; border-color:var(--color-border); border-radius: 5px; padding-top: 8px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; }
   #main { width:100%; }
   p { width:100%; }
</style>
<body>
<script>
let winurlstr = window.location.href;
let winurlsearchstr = window.location.search;
let winurlexsearchstr = winurlstr.replace(winurlsearchstr,'');
let winurlparams  = new URLSearchParams(winurlsearchstr.substring(1));

faddelem('p',document.body,{innerHTML:'<span id="error">hello i\'m a blog<br><br>' + 
                                      furl(github_root+'aa.html', 'sample link with return_to appended') + '</span>'});

console.log('hostname ~ ' + window.location.hostname);

// append return_to to the end of outlinks
document.addEventListener('DOMContentLoaded', function() {
    // Only target links within a specific widget container if possible, e.g., '.custom-outlink-widget'
    const widgetContainer = document.querySelector('.custom-outlink-widget');
 console.log('one');
    if (widgetContainer) {
 console.log('two');
        const links = widgetContainer.querySelectorAll('a');
        links.forEach(link => {
 console.log('three');
            // Check if the link is external
            if (link.hostname !== window.location.hostname) {
 console.log('four');
                const currentUrl = encodeURIComponent(window.location.href);
                const separator = link.href.includes('?') ? '&' : '?';
                link.href += separator + 'returnurl=' + currentUrl;
            }
        });
    }
});
 
</script>
</body>

</html>
