const root_observations="https://www.inaturalist.org/observations/",root_people="https://www.inaturalist.org/people/",root_obs_fields="https://www.inaturalist.org/observation_fields/",root_projects="https://www.inaturalist.org/projects/",root_taxa="https://www.inaturalist.org/taxa/",root_places="https://www.inaturalist.org/places/",json_root="../core/json/",js_root="../core/js/",root_usda="https://plants.usda.gov/plant-profile/",root_missouri="https://www.missouribotanicalgarden.org/PlantFinder/PlantFinderDetails.aspx?kempercode=",CONST_TOTAL_SPECIES="total species: ",CONST_TOTAL_OBS="total observations: ",CONST_PAGE="page: ",CONST_PER_PAGE="per page: ",CONST_ON="On ",CONST_ALL_PLANTS="All Plants",CONST_SPECIES="species:",CONST_OBSERVATIONS="observations:",CONST_ENTIRE_UMBRELLA="Entire Umbrella",CONST_OF=" of ",CONST_ABOUT="About",CONST_CHOOSE_PLANT="Choose Plant",CONST_SHOWING_COUNTS_FOR="showing counts for",CONST_LS_MAP_EXTENT_nelat=39.13652110135628,CONST_LS_MAP_EXTENT_nelng=-84.3476428020592,CONST_LS_MAP_EXTENT_swlat=39.12904776433699,CONST_LS_MAP_EXTENT_swlng=-84.35708417779162,CONST_ALL="all",CONST_SHOW="Show",CONST_PLACE="Place",CONST_PLUS_UTF8="&#10133;",CONST_SUNFLOWER_UTF8="&#127803;",CONST_LEAF_UTF8="&#127807;",CONST_SEEDLING_UTF8="&#x1F331;",CONST_BOOT_UTF8='<span style="font-size: 18px;">&#x1F97E;</span>',CONST_NPC_UTF8="&#128101;",CONST_ART_UTF8="&#127912;",CONST_ANIMALS_UTF8="&#128038;",CONST_STUDIES_UTF8="&#127891;",CONST_OBSERVATIONS_PER_PAGE="100",CONST_SPECIES_COUNTS_PER_PAGE="100",CONST_OBSERVATIONS_OBSERVERS_PER_PAGE="100";function fcomnum(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function furl(url,txt=url){const a=document.createElement("a"),safeUrl=url.trim().toLowerCase().startsWith("javascript:")?"#":url;return a.href=safeUrl,a.textContent=txt,a}function faddelem(etype,eparent=null,eattributes={}){const eobj=document.createElement(etype);for(let[key,value]of Object.entries(eattributes))"style"===key&&"object"==typeof value?Object.assign(eobj.style,value):"innerHTML"===key||"html"===key?eobj.innerHTML=value:"textContent"===key?eobj.textContent=value:eobj[key]=value;return eparent&&eparent.appendChild(eobj),eobj}function faddelems(etype,eparent=null,eattributes=[]){for(let e of eattributes)faddelem(etype,eparent,e)}function replaceDoubleQuotes(str){return str.replace(/"/g,"%22")}function capitalizeWords(str){return str.toLowerCase().split(" ").map(function(word){return word.charAt(0).toUpperCase()+word.slice(1)}).join(" ")}function buildNavHome(navbar,baseUrl=null,homeState=null){baseUrl||(baseUrl="../admin/dashboard.html"),homeState||(homeState=clearForDashParams(appState));let homeUrl=baseUrl+buildParameterList(homeState),homeDiv=faddelem("div",navbar,{id:"home"}),hLink=faddelem("a",homeDiv,{href:homeUrl});faddelem("span",hLink,{innerHTML:"&#127807;"})}function buildNavTitle(navbar,title){let titleDiv=faddelem("div",navbar,{id:"nav_title"});faddelem("div",titleDiv,{className:"dd_title",textContent:title})}function buildNavLink(navbar,baseUrl,homeState,label){let homeUrl=baseUrl+buildParameterList(homeState),homeDiv=faddelem("div",navbar,{id:"navlink"}),hLink=faddelem("a",homeDiv,{href:homeUrl});faddelem("span",hLink,{textContent:label})}function buildNavAbout(navbar,baseUrl,homeState){let homeUrl=baseUrl+buildParameterList(homeState),homeDiv=faddelem("div",navbar,{id:"home"}),hLink=faddelem("a",homeDiv,{href:homeUrl});faddelem("span",hLink,{textContent:"About"})}function buildNavDDPlace(navbar,dd_name,results,config,baseUrl,sub_taxon_arr){if(config.places){let urlState=appState;urlState=setPlaceMenuId(urlState,""),urlState=setPlaceMenuName(urlState,""),urlState=setPage(urlState,"1");let dropdown=faddelem("div",navbar,{className:"dropdown"});faddelem("button",dropdown,{className:"dropbtn",textContent:capitalizeWords(dd_name)});let ddContent=faddelem("div",dropdown,{className:"dropdown-content"}),allUrl,allLink=faddelem("a",ddContent,{href:baseUrl+buildParameterList(urlState)});faddelem("span",allLink,{textContent:"Entire Umbrella"});for(let j=0;j<config.places.length;j++){urlState=setPlaceMenuId(urlState,config.places[j].placeId),urlState=setPlaceMenuName(urlState,config.places[j].placeName);let iconUrl,tLink=faddelem("a",ddContent,{href:baseUrl+buildParameterList(urlState)});faddelem("span",tLink,{textContent:config.places[j].placeName})}}}function buildNavDDTaxa(navbar,dd_name,results,config,baseUrl,sub_taxon_arr){if(config.taxa){let urlState=appState;urlState=setPlantMenuId(urlState,""),urlState=setPlantMenuName(urlState,""),urlState=setPage(urlState,"1");let dropdown=faddelem("div",navbar,{className:"dropdown"});faddelem("button",dropdown,{className:"dropbtn",textContent:capitalizeWords(dd_name)});let ddContent=faddelem("div",dropdown,{className:"dropdown-content"}),allUrl,allLink=faddelem("a",ddContent,{href:baseUrl+buildParameterList(urlState)});faddelem("span",allLink,{textContent:capitalizeWords("all")});for(let j=0;j<config.taxa.length;j++){urlState=setPlantMenuId(urlState,config.taxa[j].taxonId),urlState=setPlantMenuName(urlState,config.taxa[j].taxonName);let iconUrl,tLink=faddelem("a",ddContent,{href:baseUrl+buildParameterList(urlState)});faddelem("span",tLink,{textContent:config.taxa[j].taxonName})}}}function buildNavDDObsFields(navbar,dd_name,results,config,baseUrl,sub_taxon_arr){if(config.ddObsFields){let urlState=appState;urlState=setFieldName(urlState,""),urlState=setFieldValue(urlState,""),urlState=setPage(urlState,"1");let dropdown=faddelem("div",navbar,{className:"dropdown"});faddelem("button",dropdown,{className:"dropbtn",textContent:capitalizeWords(dd_name)});let ddContent=faddelem("div",dropdown,{className:"dropdown-content"}),allUrl,allLink=faddelem("a",ddContent,{href:baseUrl+buildParameterList(urlState)});faddelem("span",allLink,{textContent:capitalizeWords("all")});for(let j=0;j<config.ddObsFields.length;j++){urlState=setFieldName(urlState,config.ddObsFields[j].fieldName),urlState=setFieldValue(urlState,config.ddObsFields[j].fieldValue);let iconUrl,tLink=faddelem("a",ddContent,{href:baseUrl+buildParameterList(urlState)});faddelem("span",tLink,{textContent:config.ddObsFields[j].fieldValue})}}}function buildNavDDFilteredShow(navbar,dd_name,results,config,baseUrl){let raw_taxon_str,sub_taxon_arr=(getTaxonDD(appState)||"").split(",").filter(id=>config.subIcons.some(iconObj=>iconObj.taxonId.toString()===id.trim()));if(appState=setTaxonDD(appState,sub_taxon_arr.join(",")),sub_taxon_arr=getTaxonDD(appState)||[],getTaxonDD(appState))sub_taxon_arr=getTaxonDD(appState);else if(config.subIcons){for(let i=0;i<results.length;i++)if(!sub_taxon_arr.includes(results[i].taxon.id.toString()))for(let j=0;j<config.subIcons.length;j++)for(let k=0;k<results[i].taxon.ancestor_ids.length;k++)results[i].taxon.ancestor_ids[k].toString()===config.subIcons[j].taxonId.toString()&&(sub_taxon_arr.includes(config.subIcons[j].taxonId)||sub_taxon_arr.push(config.subIcons[j].taxonId));appState=setTaxonDD(appState,sub_taxon_arr.join())}buildNavDDShow(navbar,dd_name,results,config,baseUrl,sub_taxon_arr)}function buildNavDDShow(navbar,dd_name,results,config,baseUrl,sub_taxon_arr){if(config.subIcons){let urlState=appState;urlState=setMenuId(urlState,""),urlState=setMenuName(urlState,""),urlState=setPage(urlState,"1");let dropdown=faddelem("div",navbar,{className:"dropdown"});faddelem("button",dropdown,{className:"dropbtn",textContent:capitalizeWords(dd_name)});let ddContent=faddelem("div",dropdown,{className:"dropdown-content"}),allUrl,allLink=faddelem("a",ddContent,{href:baseUrl+buildParameterList(urlState)});faddelem("span",allLink,{innerHTML:"&#10133;"}),faddelem("span",allLink,{textContent:"all"});for(let j=0;j<config.subIcons.length;j++)if(!sub_taxon_arr||sub_taxon_arr.includes(config.subIcons[j].taxonId)){urlState=setMenuId(urlState,config.subIcons[j].taxonId);let iconUrl,tLink=faddelem("a",ddContent,{href:baseUrl+buildParameterList(urlState)});config.subIcons[j].icon&&faddelem("span",tLink,{innerHTML:config.subIcons[j].icon}),faddelem("span",tLink,{textContent:config.subIcons[j].name})}}}function buildHeader(entity,total,per_page,page_curr,page_max,title_1,title_2,title_3){const container=document.createElement("div");container.className="rl-box-bar";const lboxDiv=document.createElement("div");lboxDiv.id="lbox";const tableLeft=document.createElement("table");let x_of_y;tableLeft.className="tableboxkey";const rows=void 0;[[entity,total],["per page:",per_page],["page:",page_curr+" of "+page_max]].forEach(([label,val])=>{const tr=document.createElement("tr");tr.className="trboxes";const tdL=document.createElement("td");tdL.className="tdleft",tdL.textContent=label;const tdR=document.createElement("td");tdR.className="tdrightbox",tdR.textContent=val,tr.append(tdL,tdR),tableLeft.appendChild(tr)}),lboxDiv.appendChild(tableLeft);const rightDiv=document.createElement("div");rightDiv.id="upperright";const tableRight=document.createElement("table");return tableRight.className="tableboxkey",[title_1,title_2,title_3].forEach(content=>{const tr=document.createElement("tr");tr.className="trboxes";const td=document.createElement("td");td.className="tdrightbox2",content&&""!==content?"string"==typeof content?content.includes("<")&&content.includes(">")?td.innerHTML=content:td.textContent=content:content instanceof HTMLElement&&td.appendChild(content):td.innerHTML="&nbsp;",tr.appendChild(td),tableRight.appendChild(tr)}),rightDiv.appendChild(tableRight),container.append(lboxDiv,rightDiv),container}function renderHeader(entity,total,per_page,page_curr,page_max,title_1,title_2,title_3){let headerElem=buildHeader(entity,total,per_page,page_curr,page_max,title_1,title_2,title_3);const pWrapper=document.createElement("p");pWrapper.appendChild(headerElem),document.body.appendChild(pWrapper)}function sortWithNull(arr,ascending=!0){for(let i=0;i<arr.length;i++)arr[i].taxon.preferred_common_name&&(arr[i].taxon.preferred_common_name=arr[i].taxon.preferred_common_name.toLowerCase());return arr.sort(function(a,b){return a.taxon.preferred_common_name||b.taxon.preferred_common_name?a.taxon.preferred_common_name?b.taxon.preferred_common_name?a.taxon.preferred_common_name<b.taxon.preferred_common_name?ascending?-1:1:a.taxon.preferred_common_name>b.taxon.preferred_common_name?ascending?1:-1:0:ascending?-1:1:ascending?1:-1:0}),arr}function buildSpeciesPhoto(brow,rec){let tdPhoto=faddelem("td",brow);rec.taxon&&rec.taxon.default_photo?faddelem("img",tdPhoto,{className:"icon",src:rec.taxon.default_photo.square_url}):faddelem("div",tdPhoto,{className:"clipart",html:"&#127807;"})}function buildObsPhoto(brow,rec){let tdPhoto=faddelem("td",brow),a=faddelem("a",tdPhoto,{href:root_observations+rec.id});faddelem("img",a,{className:"mini_photo2",src:rec.photos&&rec.photos.length>0?rec.photos[0].url:""})}function buildSpeciesName(brow,rec,url){let tdName=faddelem("td",brow),a=faddelem("a",tdName,{href:url});faddelem("span",a,{style:{fontSize:"larger"},textContent:(rec.taxon.preferred_common_name||"").toLowerCase()});let br=faddelem("br",a);faddelem("span",a,{style:{fontStyle:"italic"},textContent:"("+(rec.taxon.name||"")+")"})}function buildObserverPhoto(brow,rec){let tdPhoto=faddelem("td",brow);rec.user.icon?faddelem("img",tdPhoto,{className:"exp_icon",src:rec.user.icon}):faddelem("div",tdPhoto,{className:"npcicon",html:""})}function buildObserver(brow,rec){let tdName=faddelem("td",brow),a=faddelem("a",tdName,{href:root_people+rec.user.login});faddelem("span",a,{textContent:rec.user.login})}function buildObservationCounts(brow,rec,url){let tdName=faddelem("td",brow),a=faddelem("a",tdName,{href:url});faddelem("span",a,{textContent:rec.observation_count})}
